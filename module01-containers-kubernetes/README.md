
### ما هدف هذا الفصل


هدف هذه الوحدة هو أن نؤسس أرضية معرفية قوية.  
قبل أن نغوص في أوامر `kubectl`، أو نشر التطبيقات، أو إعداد الكلاستر، يجب أن نفهم الصورة الكبيرة:

- **لماذا ظهرت الحاويات (Containers)؟**
- **ما المشكلة التي جاءت لتُحلّها؟**
- **ما هو Docker؟ وكيف أصبح Kubernetes هو الأداة القياسية لإدارة البنية السحابية الحديثة؟**


### ملاحظات مهمة

- إذا كنت تعرف الحاويات مسبقًا، خذ هذه الوحدة كمراجعة سريعة أو إعادة ترتيب للمفاهيم في ذهنك.
- وإذا كنت مبتدئًا تمامًا… فهذه الوحدة مكتوبة لك، لتكون بداية واضحة، سلسة، وملهمة.



### في نهاية هذا **الفصل**

سيكون لديك فهم جيد لما يلي:

- لماذا ظهرت الحاويات؟  
- ما هي أبرز مميزاتها؟  
- ما الفرق بين Docker وKubernetes؟  
- ما هي تحديات إدارة التطبيقات الحديثة؟ ولماذا Kubernetes هو الحل؟



--> هيا بنا نبدأ الرحلة… من أول خطوة، إلى أن تصبح بإذن الله قادرًا على **نشر تطبيقاتك بثقة على Kubernetes في أي بيئة أو سحابة**.



## **ما هي الحاويات (Containers)؟**


### 1. ما هي الحاويات؟

الحاويات (Containers) هي تقنية حديثة تُستخدم لتغليف وتشغيل التطبيقات بطريقة موثوقة وقابلة للنقل بين البيئات المختلفة، سواء على الحاسوب المحلي أو على الخوادم أو في السحابة.

> **الحاوية هي وحدة خفيفة الوزن ومتنقلة تحتوي على كل ما يحتاجه التطبيق ليعمل: الكود، المكتبات، الإعدادات، والاعتمادات – كل ذلك في حزمة واحدة.**


### كيف تعمل الحاويات؟

- تعمل فوق نظام التشغيل مباشرة (بدون الحاجة إلى نظام تشغيل كامل لكل تطبيق كما في الآلات الافتراضية).
- تستخدم نواة نظام التشغيل المشترك، مما يجعلها **أسرع** و**أخف وزنًا** من الآلات الافتراضية.
- تُدار غالبًا باستخدام أدوات مثل Docker وPodman.

تخيل أنك تريد تشغيل تطبيق ويب بسيط. بدلًا من تثبيت كل شيء على النظام الرئيسي (مثل Python أو Java أو Nginx)، الحاوية تجمع كل ما يحتاجه التطبيق:  
الـ code، المكتبات، الإعدادات… كل شيء في **علبة واحدة**.

🔹 هذه العلبة يمكن نقلها وتشغيلها **في أي مكان**:  
سواء على جهازك الشخصي، في مركز بيانات، أو على السحابة – النتيجة دائمًا واحدة.


### 2. ما الفرق بينها وبين الـ Virtual Machines؟

| المقارنة         | Virtual Machine (VM)               | Container                       | 
|----------------|------------------------------------|-----------------------------------------|
| الحجم             | كبير – يشمل نظام تشغيل كامل    | خفيف – يشارك نواة النظام               |
| السرعة           | بطيء في التشغيل                     | سريع جدًا في الإقلاع                       |
| العزل             | قوي، لكن ثقيل                          | جيد وخفيف الوزن                          |
| قابلية النقل       | معقّدة بعض الشيء                    | سهلة جدًا – "Run Anywhere"  |



### 3. ماذا تحتوي الحاوية بالضبط؟

داخل كل حاوية تجد:

- تطبيقك (مثلاً: Node.js أو Python أو Java).
- كل المكتبات التي يعتمد عليها.
- ملفات الإعداد.
- متغيّرات البيئة (Environment Variables).
- ولا شيء غير ذلك.

لكنها **لا تحتوي على نظام تشغيل كامل** مثل VM.  
بل تشارك نواة النظام (Kernel) مع باقي الحاويات.



### 4. لماذا نستخدم الحاويات؟

إليك أهم الفوائد:

1. **المرونة**: شغّل نفس الحاوية على أي مكان بدون تغيير.
2. **السرعة**: الحاويات تقلع في ثوانٍ.
3. **العزل**: كل تطبيق في بيئة مستقلة.
4. **التحكم في الإصدارات**: كل شيء معرف مسبقًا داخل الحاوية.
5. **قابلية التوسع**: يمكننا تشغيل مئات الحاويات بسهولة.
### 5. من أين تأتي الحاويات؟

أشهر أداة لإنشاء الحاويات هي **Docker**.  

🔹 دوكر يسمح لك بإنشاء الحاويات وتشغيلها على جهازك أو على أي بيئة أخرى بسهولة.


##  الخلاصة

- الحاويات هي مستقبل تشغيل التطبيقات.
- خفيفة، مرنة، ويمكن نقلها بسهولة.
- جاءت لتحل مشاكل كانت موجودة مع الـ VMs والأنظمة التقليدية.
- دوكر أشهر أداة لإنشاء الحاويات.
- "Kubernetes" هو النظام الذي سيساعدنا في **إدارة الحاويات على نطاق واسع**.




#  ما هي الـ Microservices؟ ولماذا أصبحت الطريقة الحديثة لبناء التطبيقات؟

##  1. ما هي الـ Microservices؟

- هو **نموذج معماري** لتصميم التطبيقات، بحيث يتم تقسيم التطبيق الكبير إلى **مجموعة من الخدمات الصغيرة (Services)**.  
كل خدمة تقوم بمهمة واحدة فقط، وتعمل بشكل مستقل، ويمكن نشرها وتطويرها وتحديثها **بشكل منفصل** عن باقي الخدمات.

🔹 كل خدمة تعتبر **وحدة قائمة بذاتها**:
- لها قاعدة بيانات خاصة (غالبًا).
- تتحدث عبر API.
- يمكن أن تُكتب بلغة مختلفة.
- وتُدار بفريق منفصل.


##  2. الفرق بين Microservices وMonolithic

دعونا نقارن بين النموذج القديم (Monolithic) والجديد (Microservices):

|             | Monolithic App         | Microservices App              |
|-------------|-------------------------|--------------------------------|
| البنية        | تطبيق ضخم موحّد           | عدة خدمات صغيرة               |
| النشر         | نسخة واحدة للتطبيق الكامل   | كل خدمة يمكن نشرها بشكل مستقل |
| الصيانة       | صعبة – كل شيء مرتبط        | أسهل – كل خدمة مستقلة          |
| التوسعة       | توسعة للتطبيق كامل         | توسعة لخدمة واحدة فقط         |
| التعطّل       | خطأ في جزء = توقف التطبيق | خطأ في خدمة = فقط تلك الخدمة |

📌 مثال بسيط:  
تطبيق متجر إلكتروني فيه:
- خدمة الطلبات
- خدمة الدفع
- خدمة الشحن
- خدمة المستخدمين

👉 في Microservices: كل واحدة من هذه الخدمات تُدار وتُحدث بشكل مستقل!



##  3. كيف تتواصل الـ Microservices مع بعضها؟

عبر الـ **APIs**، غالبًا باستخدام HTTP (REST) أو بروتوكولات أكثر كفاءة مثل **gRPC**.

كل خدمة تُعرض API معين:
- Service A ترسل طلبًا إلى Service B.
- الرد يكون عبارة عن JSON أو Protocol Buffers.

في الأنظمة الكبيرة، يمكن أيضًا استخدام **Service Mesh** (مثل Istio) لإدارة هذه الاتصالات.



##  4. لماذا Microservices مهمة في عالم Kubernetes؟

لأن Kubernetes بحد ذاته صُمّم ليدير:
- مئات الحاويات.
- كل واحدة تمثّل خدمة مستقلة.

**Microservices + Containers + Kubernetes = أفضل مزيج لإنشاء تطبيقات سحابية قوية، مرنة، قابلة للتوسع.**



##  5. فوائد الـ Microservices

-  **المرونة في التطوير**: كل فريق يطور خدمة دون التأثير على الآخرين.
-  **سهولة التوسع**: نزيد عدد النسخ فقط للخدمات التي تحتاجها.
-  **قابلية النشر المستقل**: نحدث جزءًا من التطبيق فقط.
-  **تحسين الاستقرار**: خطأ في خدمة واحدة لا يؤثر على الباقي.
-  **إمكانية استخدام تقنيات متعددة**: Node.js لخدمة، Python لخدمة أخرى… بحرية!



##  6. هل هناك تحديات؟

نعم، Microservices ليست حلًا سحريًا:

- تعقيد في الاتصال بين الخدمات (Networking).
- الحاجة إلى مراقبة وتسجيل مركزي (Observability).
- أمان أعلى بسبب كثرة النقاط المفتوحة.
- الحاجة إلى CI/CD قوي.
- الحاجة إلى تنظيم مثل Service Discovery، Load Balancing…

وهنا يأتي دور Kubernetes، فهو **يوفّر بيئة قوية لإدارة هذه التعقيدات**.



##  7. متى أستخدم Microservices؟

- عندما يكون التطبيق كبيرًا ويُدار من عدة فرق.  
- عندما تحتاج إلى توسعة مستقلة لكل جزء من أجزاء التطبيق.  
- عندما تريد المرونة والسرعة في التحديث والنشر.

❌ لا تستخدم Microservices في تطبيق بسيط أو MVP صغير – التعقيد سيزيد بلا فائدة.



##  الخلاصة

- Microservices = طريقة حديثة لبناء التطبيقات عبر تقسيمها إلى خدمات صغيرة.
- تعطيك مرونة، استقلالية، وسهولة في التوسع والصيانة.
- لكنها تتطلب أدوات قوية مثل Kubernetes، وDevOps، ومراقبة دقيقة.
- في هذه الدورة سنتعلم كيف ندير Microservices باستخدام Kubernetes بفعالية.


#  نظرة سريعة على Docker



##  ما هو Docker؟

**Docker** هو منصة مفتوحة المصدر تتيح لك بناء وتشغيل وتوزيع التطبيقات داخل شيء يُسمى **الحاويات (Containers)**.

 **تشبيه بسيط:**
> تخيّل أن عندك تطبيق، وكل مرة تريد تشغيله على جهاز جديد تواجه مشاكل في التوافق، المكتبات، الإعدادات…  
> Docker يحل هذا كله. هو مثل "صندوق مغلق" يحوي التطبيق وكل ما يحتاجه ليعمل في أي مكان، بنفس الشكل والسلوك.



##  مكونات Docker الأساسية

1. **Docker Engine**: محرك Docker، يعمل كخلفية على جهازك.
2. **Docker Images**: ملفات جاهزة تحوي نظام التشغيل + التطبيق + كل الاعتماديات.
3. **Docker Containers**: "الصناديق" التي تعمل من الصور (Images). كل حاوية = تطبيق يعمل معزولًا عن الباقي.
4. **Dockerfile**: ملف نصي يعرّف كيفية بناء صورة Docker.
5. **Docker Hub**: مستودع عالمي لمشاركة وتحميل الصور الجاهزة.


## الفرق بين VM و Container

| المعيار        | Virtual Machine (VM) 🖥️ | Docker Container 🐳 |
|----------------|--------------------------|----------------------|
| الحجم          | كبير (جيجابايت)          | خفيف (ميجابايت)      |
| الإقلاع        | بطيء (دقائق)              | سريع (ثواني)         |
| استهلاك الموارد| عالي                      | منخفض                |
| العزل          | كامل (نظام تشغيل مستقل)   | عزل على مستوى العملية|

 **الخلاصة**: Docker أخف وأسرع من الـ VMs، لكن بدون الحاجة إلى نظام تشغيل كامل داخل كل حاوية.



## لماذا Docker مهم في عالم Kubernetes؟

Kubernetes لا يدير التطبيقات بشكل مباشر… بل يدير **الحاويات (Containers)**.

 وDocker هو الأداة الأكثر شيوعًا لإنشاء هذه الحاويات.

لذلك، عندما تنشئ تطبيقك كـ Docker Image، يمكن لـ Kubernetes أن يجدها، يشغّلها، يوزعها، ويراقبها.



##  ماذا تحتاج لتعرفه من Docker قبل دخول Kubernetes؟

- كيف تعمل Images و Containers.
- الفرق بين Image و Container.
- كيف تُنشئ صورة بـ Dockerfile.
- بعض الأوامر الأساسية مثل:
```bash
  docker build -t myapp .
  docker run myapp
  docker ps
  docker stop <container_id>
```




###  المتطلبات:

- نظام تشغيل يدعم Docker (Linux, macOS, Windows).
    
- تثبيت Docker Desktop أو Docker Engine.
    


###  خطوات التجربة (بالأوامر):

### 1. التحقق من تثبيت Docker:
```
docker --version
```
### 2. تشغيل أول حاوية:

نشغّل خادم NGINX داخل حاوية:
```
docker run -d -p 8080:80 nginx
```
- `-d`: تشغيل في الخلفية.
- `-p 8080:80`: ربط منفذ 8080 على الجهاز مع منفذ 80 داخل الحاوية.
    

### 3. التحقق أن الحاوية تعمل:
```
docker ps
```

### 4. زيارة التطبيق:

افتح المتصفح وادخل:
```
http://localhost:8080
```

➡️ سترى صفحة الترحيب بـ NGINX.

### 5. الدخول إلى داخل الحاوية:
```
docker exec -it <container_id> bash
```
### 6. إيقاف الحاوية:

```
docker stop <container_id>
```

#### 7. إزالة الحاوية (إزالة الحاوية)

```
docker rm my-nginx
```
### شرح المصطلحات (شرح المصطلحات)

- **صورة (Image)**: قالب يحتوي على تطبيق وجميع تبعياته
- **حاوية (Container)**: نسخة قيد التشغيل من صورة
- **Dockerfile**: ملف نصي يحتوي على تعليمات لإنشاء صورة
    

### إنشاء Dockerfile بسيط (إنشاء Dockerfile بسيط)

1. إنشاء مجلد جديد:
    

```
mkdir my-docker-app
cd my-docker-app
```
2. إنشاء ملف `Dockerfile`:
    
```
FROM nginx:alpine
COPY . /usr/share/nginx/html
```
3. إنشاء ملف `index.html`:
    

```
<!DOCTYPE html>
<html>
<head>
    <title>Welcome to Docker</title>
</head>
<body>
    <h1>This is my first app on Docker</h1>
    <p>Kubernetes is the next step!</p>
</body>
</html>
```
4. بناء الصورة:
    

```
docker build -t my-app .
```
5. تشغيل الحاوية:
    
```
docker run -d -p 8080:80 --name my-app-container my-app
```
6. افتح المتصفح على [http://localhost:8080](http://localhost:8080/) لترى تطبيقك!
    

### أوامر مفيدة (أوامر مفيدة)

- عرض جميع الحاويات (النشطة وغير النشطة):
    
```
docker ps -a
```
- عرض الصور المحلية:
    
```
docker images
```
- الدخول إلى الحاوية:
    

```
docker exec -it my-nginx /bin/bash
```
- عرض سجلات الحاوية:
    

```
docker logs my-nginx
```

###  ملاحظات تعليمية:

- هذه التجربة تعطي المتعلم "لحظة aha!" ليفهم كيف تعمل الحاويات بشكل عملي.
- نوضح أن نفس التطبيق يمكن تشغيله في أي بيئة فقط باستخدام أمر `docker run`.
- نشرح أن Kubernetes يدير عددًا كبيرًا من هذه الحاويات على مستوى متقدّم.
    


###  ما الذي سيتعلمه المتعلم من هذا العرض؟

- أن Docker أداة لتغليف التطبيقات وتشغيلها في بيئة معزولة.
- أن تشغيل تطبيق داخل Container أسرع وأسهل من التشغيل التقليدي.
- أن هذه الفكرة هي الأساس الذي يبني عليه Kubernetes إدارته.



#  ما هو Kubernetes ولماذا نحتاجه؟

##  خلفية: قبل Kubernetes

قبل أن نفهم لماذا نحتاج Kubernetes، دعونا نرجع خطوة إلى الوراء.

🔸 في السابق كنا نثبت التطبيقات مباشرة على السيرفر (Bare Metal).
🔸 ثم جاء عصر **الآلات الافتراضية (VMs)**.
🔸 ثم ظهرت **الحاويات (Containers)** مثل Docker، لتشغيل التطبيقات بشكل خفيف ومعزول.

لكن مع ازدياد عدد الحاويات والتطبيقات والخدمات...

> بدأنا نواجه مشاكل كبيرة في الإدارة!


##  المشكلة التي يحلّها Kubernetes

تخيل أن لديك 50 أو 500 حاوية (Container) تعمل على عدة خوادم...  
هل تستطيع إدارتها يدويًا؟ هل تراقب كل واحدة؟ هل تتحكم في التوسعة والتكرار والتحديث؟

🔻 المشاكل:

- كيف أوزع الحاويات على السيرفرات؟
- ماذا لو تعطل Container؟ من سيعيد تشغيله؟
- كيف أوسع عدد النسخ تلقائيًا حسب الضغط؟
- كيف أُحدّث التطبيق بدون توقف الخدمة؟
- كيف أُدير الإعدادات والأسرار (secrets) والشبكات بين الخدمات؟

❗ هنا يأتي دور Kubernetes كمنقذ.



##  تعريف Kubernetes

**Kubernetes** هو:

أشهر اختصار له هو:  
**K8s** (لأن بين الحرف K و s توجد 8 أحرف).

**Kubernetes** (ويُلفظ: كو-بير-ني-تِس أو كيوبِرنيتِس، ويُختصر إلى **K8s**) هو:

> **نظام مفتوح المصدر (Open-source platform) تم تطويره في الأصل من قبل Google سنة 2014، بعده جعلته غوغل مفتوح المصدر وقدمته ل Cloud Native Computing Foundation (CNCF) وأصبح رائدًا واضحًا في مجال التطبيقات المستندة إلى الحاويات.** 
>  

يهدف Kubernetes إلى إدارة وتشغيل الحاويات (Containers) بشكل آلي (Automated).**

بمعنى آخر:

هو **منصة تنسيق (Orchestration Platform)** تُدير تشغيل التطبيقات المُعبّأة داخل حاويات مثل Docker، عبر مجموعة من الخوادم (Cluster)، بشكل موثوق، قابل للتوسعة، وذاتي الإصلاح.



##  ماذا يفعل Kubernetes؟

ببساطة، Kubernetes:

- ينشئ الحاويات ويشغلها  
- يوزعها على الخوادم بطريقة ذكية  
- يراقبها ويعيد تشغيل المعطّلة  
- يوسع عدد النسخ تلقائيًا  
- يحدث التطبيقات بدون Downtime  
- يوفر عنوان IP وتوزيع حركة المرور (Load Balancing)  
- يُدير التخزين، الأسرار، التهيئة، والهوية  
- يعزل البيئات (dev/prod/test) داخل نفس الكلاستر  



##  مكونات Kubernetes (نظرة سريعة)

| العنصر         | الوصف                                                             |
|----------------|-------------------------------------------------------------------|
| Cluster         | مجموعة من الخوادم تعمل كوحدة واحدة                              |
| Nodes           | كل خادم داخل الكلاستر                                            |
| Pod             | أصغر وحدة تشغيل، يحتوي على حاوية أو أكثر                         |
| Deployment      | مسؤول عن تشغيل وتحديث التطبيقات                                 |
| Service         | يربط Pods ويكشفها للشبكة                                         |
| ConfigMap/Secret| لإدارة الإعدادات والأسرار                                        |
| Ingress         | لتوجيه الترافيك HTTP/HTTPS إلى الخدمات                           |
| Volume          | تخزين البيانات داخل الحاويات                                     |

(سنشرح هذه المكونات واحدة تلو الأخرى في وحدات الدورة بإذن الله ✅)



##  لماذا تستخدم الشركات Kubernetes؟

Kubernetes يُستخدم في كل مكان تقريبًا الآن، ومن أهم أسبابه:

- **مرونة التوسعة (Scalability)**: بسهولة يمكن أن تنتقل من نسخة واحدة إلى آلاف النسخ.
- **التوافر العالي (High Availability)**: Kubernetes يضمن بقاء التطبيق يعمل حتى عند حدوث مشاكل.
- **التحديث بدون توقف (Zero-Downtime)**: يمكنك تحديث التطبيق بدون أن يشعر المستخدم.
- **توفير التكاليف**: استهلاك موارد أقل بفضل جدولة ذكية.
- **التوحيد عبر البيئات**: نفس التطبيق يمكن تشغيله على اللابتوب، على سيرفر خاص، أو على السحابة.



##  ملاحظة مهمة

Kubernetes لا يشغّل الحاويات بنفسه، بل يحتاج إلى أداة مثل Docker أو containerd لإنشاء الحاويات.



##  الخاتمة

📌 إذًا باختصار:

> Kubernetes = المنسق والمخرج الذكي لحاوياتك.

هو المسؤول عن التأكد من أن كل شيء يعمل كما يجب، في وقته، في مكانه، وبالشكل الصحيح — دون تدخل يدوي منك.


## 📚 مصادر خطة الدراسة – الفصل 1: مقدمة إلى الحاويات وKubernetes


فيما يلي مجموعة من المصادر الموصى بها لتعميق فهمك للمفاهيم التي تناولناها في هذه الوحدة:

###  فيديوهات ودروس مرئية
- [What is a Container? - Docker Official](https://www.youtube.com/watch?v=EnJ7qX9fkcU) – شرح بسيط من Docker عن مفهوم الحاويات.
- [Microservices Explained – IBM](https://www.youtube.com/watch?v=CZ3wIuvmHeM) – مقدمة مرئية ممتازة حول الـ Microservices.
- [What is Kubernetes? – Google Cloud](https://www.youtube.com/watch?v=PH-2FfFD2PU) – شرح رسمي مبسط من Google.

###  مقالات و توثيق رسمي
- [Docker Overview](https://docs.docker.com/get-started/overview/) – مقدمة رسمية من Docker.
- [Kubernetes Basics – Official Docs](https://kubernetes.io/docs/tutorials/kubernetes-basics/) – الوحدة الأولى من سلسلة التعليم الرسمية لـ Kubernetes.
- [Microservices – Martin Fowler](https://martinfowler.com/articles/microservices.html) – مرجع كلاسيكي لفهم فلسفة Microservices.




> ⚠️ ملاحظة: لا تقلق إن لم تفهم كل شيء في البداية، الأهم هو أن تتابع الدورة خطوة بخطوة، ومع الوقت ستتضح لك كل المفاهيم بعمق بإذن الله.

